{"ast":null,"code":"import _regeneratorRuntime from\"/Users/salmankhattak/Documents/metaFrontEnd/little-lemon-website/little-lemon/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/salmankhattak/Documents/metaFrontEnd/little-lemon-website/little-lemon/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _toConsumableArray from\"/Users/salmankhattak/Documents/metaFrontEnd/little-lemon-website/little-lemon/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/salmankhattak/Documents/metaFrontEnd/little-lemon-website/little-lemon/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useReducer}from'react';import CallToAction from\"./CallToAction\";import CustomersSay from\"./CustomersSay\";import Homepage from\"./Specials\";import Chicago from\"./Chicago\";import BookingPage from\"./BookingPage\";import{fetchAPI,submitAPI}from'../api.js';import ConfirmedBooking from\"./ConfirmedBooking\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Main(){var _useState=useState({date:'',time:'',guests:1,occasion:''}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var updateTimes=function updateTimes(state,action){fetchAPI(state.date).then(function(times){return times;});};var today=fetchAPI(new Date());var initializeTimes=function initializeTimes(){return _toConsumableArray(today);};var _useReducer=useReducer(updateTimes,[],initializeTimes),_useReducer2=_slicedToArray(_useReducer,2),availableTimes=_useReducer2[0],dispatchAvailableTimes=_useReducer2[1];var onFormChange=function onFormChange(newFormData){setFormData(newFormData);};var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),bookingConfirmed=_useState4[0],setBookingConfirmed=_useState4[1];var submitForm=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(formData){var success;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return submitAPI(formData);case 2:success=_context.sent;if(success){setBookingConfirmed(true);}case 4:case\"end\":return _context.stop();}},_callee);}));return function submitForm(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsx(CallToAction,{}),/*#__PURE__*/_jsx(Homepage,{}),!bookingConfirmed?/*#__PURE__*/_jsx(BookingPage,{formData:formData,onFormChange:onFormChange,availableTimes:availableTimes,dispatchAvailableTimes:dispatchAvailableTimes,submitForm:submitForm}):/*#__PURE__*/_jsx(ConfirmedBooking,{formData:formData}),/*#__PURE__*/_jsx(CustomersSay,{}),/*#__PURE__*/_jsx(Chicago,{})]});}export default Main;","map":{"version":3,"names":["React","useState","useReducer","CallToAction","CustomersSay","Homepage","Chicago","BookingPage","fetchAPI","submitAPI","ConfirmedBooking","jsx","_jsx","jsxs","_jsxs","Main","_useState","date","time","guests","occasion","_useState2","_slicedToArray","formData","setFormData","updateTimes","state","action","then","times","today","Date","initializeTimes","_toConsumableArray","_useReducer","_useReducer2","availableTimes","dispatchAvailableTimes","onFormChange","newFormData","_useState3","_useState4","bookingConfirmed","setBookingConfirmed","submitForm","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","success","wrap","_callee$","_context","prev","next","sent","stop","_x","apply","arguments","children"],"sources":["/Users/salmankhattak/Documents/metaFrontEnd/little-lemon-website/little-lemon/src/components/Main.js"],"sourcesContent":["import React, { useState, useReducer } from 'react';\nimport CallToAction from \"./CallToAction\";\nimport CustomersSay from \"./CustomersSay\";\nimport Homepage from \"./Specials\";\nimport Chicago from \"./Chicago\";\nimport BookingPage from \"./BookingPage\";\nimport { fetchAPI, submitAPI } from '../api.js';\nimport ConfirmedBooking from \"./ConfirmedBooking\";\n\nfunction Main() {\n    const [formData, setFormData] = useState({\n        date: '',\n        time: '',\n        guests: 1,\n        occasion: ''\n    });\n\n    const updateTimes = (state, action) => {\n        fetchAPI(state.date).then((times) => {\n            return times;\n        })\n    };\n\n    const today = fetchAPI(new Date());\n    const initializeTimes = () => [...today];\n\n    const [availableTimes, dispatchAvailableTimes] = useReducer(updateTimes, [], initializeTimes);\n\n    const onFormChange = (newFormData) => {\n        setFormData(newFormData);\n    };\n\n    const [bookingConfirmed, setBookingConfirmed] = useState(false);\n\n    const submitForm = async (formData) => {\n        const success = await submitAPI(formData);\n\n        if (success) {\n            setBookingConfirmed(true);\n        }\n    };\n\n    return (\n        <main>\n            <CallToAction />\n            <Homepage />\n            {!bookingConfirmed ? (\n                <BookingPage\n                    formData={formData}\n                    onFormChange={onFormChange}\n                    availableTimes={availableTimes}\n                    dispatchAvailableTimes={dispatchAvailableTimes}\n                    submitForm={submitForm}\n                />\n            ) : (\n                <ConfirmedBooking formData={formData} />\n            )}\n            <CustomersSay />\n            <Chicago />\n        </main>\n    );\n}\nexport default Main;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}